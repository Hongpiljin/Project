# KH ê²°ì‚¬ëŒ€ Final_Project
># ì°¨ëŸ‰ ìš©í’ˆ , ë ŒíŠ¸ì¹´ , ì¤‘ê³ ì°¨ íŒë§¤ ì‚¬ì´íŠ¸
>## ğŸ† íŒ€ ì†Œê°œ

>### 1. íŒ€ ì´ë¦„
KH ê²°ì‚¬ëŒ€

>### 2. íŒ€ì›
- **íŒ€ì¥**: ì´í˜„ì„±  
- **íŒ€ì›**: ì´ë¯¼, ì¥í˜¸ì§„, í™í•„ì§„, ê¹€ì°½ìˆ˜
><h2>ëª©ì°¨</h2>
<h3>1.í”„ë¡œì íŠ¸ ì†Œê°œ</h3>
<ul>
 <li>ê¸°íš ì˜ë„</li>
 <li>ëª©í‘œ</li>
</ul>
<h3>2. ê°œë°œ í™˜ê²½</h3>
<ul>
 <li>ì–¸ì–´</li>
 <li>ê°œë°œ íˆ´</li>
 <li>í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬</li>
 <li>API</li>
</ul>
<h3>3. ì£¼ìš” ê¸°ëŠ¥</h3>
<h3>4. í™”ë©´ ë° ì½”ë“œ ë¦¬ë·°</h3>
<h3>5. í”„ë¡œì íŠ¸ ì†Œê° ë° í–¥í›„ ê³„íš</h3>
<ul>
 <li>ì†Œê°</li>
 <li>í–¥í›„ ê³„íš</li>
</ul>

>## 1. í”„ë¡œì íŠ¸ ì†Œê°œ 
>### ê¸°íš ì˜ë„ 
- ì‚¬ìš©ìì—ê²Œ ê°„í¸í•œ ì¤‘ê³ ì°¨êµ¬ë§¤,ì°¨ëŸ‰ìš©í’ˆêµ¬ë§¤,ë ŒíŠ¸ì¹´ í™œìš©ì„ ì„œë¹„ìŠ¤

>### ëª©í‘œ 
- ë‹¤ì–‘í•œ ìë™ì°¨ ê´€ë ¨ ì„œë¹„ìŠ¤ë¥¼ í†µí•©í•œ ì›¹ í”Œë«í¼ì„ êµ¬ì¶•í•¨ìœ¼ë¡œì¨, ì‚¬ìš©ìì—ê²Œ í¸ë¦¬í•˜ê³  ì§ê´€ì ì¸ ì°¨ëŸ‰ ì‡¼í•‘ ê²½í—˜ì„ ì œê³µí•˜ê³ ì í–ˆìŠµë‹ˆë‹¤.
ì¤‘ê³ ì°¨ êµ¬ë§¤, ë ŒíŠ¸ì¹´ ì˜ˆì•½, ì°¨ëŸ‰ ìš©í’ˆ êµ¬ë§¤ë¥¼ í•˜ë‚˜ì˜ ì‚¬ì´íŠ¸ì—ì„œ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•˜ì˜€ê³ , ì‹¤ì œ ì„œë¹„ìŠ¤ì— ê°€ê¹Œìš´ ê¸°ëŠ¥ êµ¬í˜„ì„ í†µí•´ ì‹¤ë¬´ ê°ê°ì„ í‚¤ìš°ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì‚¼ì•˜ìŠµë‹ˆë‹¤.
íŠ¹íˆ ì €ëŠ” ì¤‘ê³ ì°¨ íŒë§¤ í˜ì´ì§€ì˜ ì „ë°˜ì ì¸ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ë©°, ì°¨ëŸ‰ í•„í„°ë§, ìƒì„¸ ì¡°íšŒ, ê²°ì œ ë° ê´€ë¦¬ì ê´€ë¦¬ ê¸°ëŠ¥, ì‚¬ìš©ìì™€ ìƒë‹´ì‚¬ì˜ ì±„íŒ…ê¹Œì§€ êµ¬í˜„í•˜ë©° í”„ë¡œì íŠ¸ì˜ í•µì‹¬ íë¦„ì„ ì´ëŒì—ˆìŠµë‹ˆë‹¤.

>## 2. ê°œë°œí™˜ê²½
>### ğŸ”¹ ì‚¬ìš© ì–¸ì–´
- **OS**: Windows
- **DB**: Oracle
- **FrontEnd**: HTML5 / CSS / JavaScript
- **BackEnd**: Java / Spring / MyBatis
- **Editor**: VS Code / Oracle SQL Developer
- **VCS**: GitHub
### ğŸ”¹ ê°œë°œ íˆ´
- Axios
- React
- React-DOM
- React-Router-DOM
- Redux
### ğŸ”¹ í”„ë ˆì„ì›Œí¬ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬
- @reduxjs/toolkit
- Axios
- Redux-Persist
- Lombok
- Oracle JDBC
- JWT
- Tomcat
- Spring WebSocket (STOMP,SockJS)
### ğŸ”¹ ì‚¬ìš© API
- ì¹´ì¹´ì˜¤ë§µ API (ì§€ë„ ë° ìœ„ì¹˜ ì •ë³´ ì œê³µ)
## 3. ì£¼ìš” ê¸°ëŠ¥
### ğŸ”¹ **í™í•„ì§„**
- ì¤‘ê³ ì°¨ í˜ì´ì§€: ìƒí’ˆ ëª©ë¡, ìƒíƒœ í•„í„°ë§, í˜ì´ì§• ê¸°ëŠ¥ êµ¬í˜„
  
- ì¤‘ê³ ì°¨ ìƒì„¸ í˜ì´ì§€: ì°¨ëŸ‰ ìƒì„¸ ì •ë³´ ì¶œë ¥, ì°¨ëŸ‰ ì„¤ëª…ìš© ì—ë””í„°, ê²°ì œ ê¸°ëŠ¥ í¬í•¨
  
- ê²°ì œ ê¸°ëŠ¥: ê²°ì œ ì™„ë£Œ ì‹œ ìƒí’ˆ ìˆ¨ê¹€ ì²˜ë¦¬, íŠ¸ëœì­ì…˜ ê´€ë¦¬, ê²°ì œ ë‚´ì—­ ì €ì¥
  
- ì¤‘ê³ ì°¨ ê´€ë¦¬ì í˜ì´ì§€: ì°¨ëŸ‰ ë°ì´í„° ì‚½ì…Â·ìˆ˜ì •Â·ì‚­ì œÂ·ì¡°íšŒ, í‚¤ì›Œë“œ ê²€ìƒ‰
  
- ì „êµ­ ì§ì˜ì  ê¸°ëŠ¥: ì§€ì—­ë³„ ì°¨ëŸ‰ ì¡°íšŒ ë° ì¹´ì¹´ì˜¤ ì§€ë„ API í™œìš©
  
- ChatBot ê¸°ëŠ¥: ì§€ì—­ ê¸°ë°˜ ì°¨ëŸ‰ ì¡°íšŒ, ì°¨ëŸ‰ ìƒì„¸ì •ë³´ ì¡°íšŒ ì§€ì›
  
- ìƒë‹´ ì±„íŒ… ê¸°ëŠ¥: ì‹¤ì‹œê°„ ì‚¬ìš©ì-ìƒë‹´ì‚¬ ì±„íŒ…, ì±„íŒ…ë°© ëª©ë¡ ì¡°íšŒ (ìƒíƒœ: ìˆ˜ë½, ê±°ì ˆ, ëŒ€ê¸°), ìƒíƒœë³„ í•„í„°ë§, í˜ì´ì§• ì²˜ë¦¬, ìƒë‹´ ì²˜ë¦¬ ê´€ë¦¬ì ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰ ê°€ëŠ¥
  
## ğŸ” ì„¤ê³„ì˜ ì£¼ì•ˆì 
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Reactë¥¼ í™œìš©í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•œ êµ¬ì¡°ë¡œ ê°œë°œ
- Base64ë¥¼ ì‚¬ìš©í•œ ì´ë¯¸ì§€ ì €ì¥ ë°©ì‹ ì ìš©
- í¬ì¸íŠ¸ ì¶©ì „ì„ í†µí•œ ì‚¬ì´íŠ¸ ë‚´ êµ¬ë§¤ í¸ì˜ ì œê³µ
- TipTap Editor í™œìš©
- Kakao Map APIë¥¼ ì‚¬ìš©í•œ ìœ„ì¹˜ ì •ë³´ ì œê³µ
- WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì±„íŒ… ì„œë¹„ìŠ¤ êµ¬í˜„

>## 4. í™”ë©´ ë° ì½”ë“œ ë¦¬ë·°
### ë©”ì¸í™”ë©´
###  ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í™”ë©´
![image](https://github.com/user-attachments/assets/0704629b-170d-4081-89e1-21f3299fe8b5)
- Front<br>
- [ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - AdminDashboard.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/AdminDashboard.js)
  
### ê´€ë¦¬ì ì°¨ëŸ‰ ì¡°íšŒ
![image](https://github.com/user-attachments/assets/cc4c0bff-5b8e-48ec-845b-88ba8d940628)
- Front<br>
 - [ê´€ë¦¬ì ì°¨ëŸ‰ ëª©ë¡ - AdminUsedCar.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/AdminUsedCar.js)
- Back<br> 
 - [ê´€ë¦¬ì ì°¨ëŸ‰ ëª©ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ - AdminUsedCarController.java](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/AdminUsedCarController.java)



### ì°¨ëŸ‰ ê´€ë¦¬ì ëª©ë¡ì—´ê³  ì°¨ëŸ‰ëª…ë§Œ ë„£ê³  ê²€ìƒ‰í–ˆì„ë•Œ í™”ë©´
 ![image](https://github.com/user-attachments/assets/36cf74b0-003b-4c3d-b50b-0eaa4aad611f)
- SQL
```  
	<!--ADMIN ì¤‘ê³ ì°¨ëª©ë¡ì—ì„œ ì°¨ëŸ‰ì´ë¦„,ì°¨ëŸ‰ë²ˆí˜¸ë¡œ ê²€ìƒ‰ -->
   <select id="searchUsedCars" resultType="com.rental.dto.UsedCarDTO">
    SELECT * 
    FROM used_car
    WHERE 1=1
    <if test="vehicleName != null and vehicleName != ''">
        AND vehicle_name LIKE CONCAT(#{vehicleName}, '%') 
    </if>
    <if test="vehicleNo != null and vehicleNo != ''">
        AND vehicle_no LIKE CONCAT(#{vehicleNo}, '%')
    </if>
   </select>
   ```
### ì°¨ëŸ‰ ê´€ë¦¬ì ëª©ë¡ì—´ê³  ì°¨ëŸ‰ëª… , ì°¨ëŸ‰ë²ˆí˜¸ ë‘˜ë‹¤ ì…ë ¥ í›„ ê²€ìƒ‰í–ˆì„ë•Œ
 ![image](https://github.com/user-attachments/assets/5e3cfc92-4e68-4865-8f7f-a9c973e86ae0)




### ì°¨ëŸ‰ ê´€ë¦¬ì ìƒˆ ì°¨ëŸ‰ ë“±ë¡  
![image](https://raw.githubusercontent.com/Hongpiljin/Project/main/img/admin_add_car.png)
- Front<br>
	- [ê´€ë¦¬ì ì°¨ëŸ‰ ë“±ë¡ í™”ë©´ Front - AdminUsedCarAdd.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/AdminUsedCarAdd.js)
- Back<br>
	- [ê´€ë¦¬ì ì°¨ëŸ‰ ë“±ë¡ í™”ë©´ Back  - AdminUsedCarController.java](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/AdminUsedCarController.java)
- SQL
```
 <insert id="insertUsedCar" parameterType="com.rental.dto.UsedCarDTO">
        INSERT INTO USED_CAR
        (
            VEHICLE_NO,
            VEHICLE_NAME,
            DEALER_NO,
            VEHICLE_TYPE,
            BRAND,
            MODEL_YEAR,
            PRICE,
            COLOR,
            DEALER_LOCATION,
            FUEL_TYPE,
            TRANSMISSION,
            DRIVE_TYPE,
            MAIN_IMAGE,
            VEHICLE_PLATE,
            CAR_KM,
            SEATING_CAPACITY,
            DESCRIPTION
        )
        VALUES
        (
            #{vehicleNo, jdbcType=VARCHAR},
            #{vehicleName, jdbcType=VARCHAR},
            #{dealerNo, jdbcType=INTEGER},
            #{vehicleType, jdbcType=VARCHAR},
            #{brand, jdbcType=VARCHAR},
            #{modelYear, jdbcType=INTEGER},
            #{price, jdbcType=INTEGER},
            #{color, jdbcType=VARCHAR},
            #{dealerLocation, jdbcType=VARCHAR},
            #{fuelType, jdbcType=VARCHAR},
            #{transmission, jdbcType=VARCHAR},
            #{driveType, jdbcType=VARCHAR},
            #{mainImage, jdbcType=BLOB},
            #{vehiclePlate, jdbcType=VARCHAR},
            #{carKm, jdbcType=INTEGER},
            #{seatingCapacity, jdbcType=INTEGER},
            #{description, jdbcType=VARCHAR}
        )
    </insert>
ì°¨ëŸ‰ ì¶”ê°€ í›„
    <update id="updateMainImage">
        UPDATE USED_CAR
           SET MAIN_IMAGE = #{mainImage, jdbcType=BLOB}
         WHERE VEHICLE_NO = #{vehicleNo}
    </update>

<insert id="insertUsedCarImage" parameterType="com.rental.dto.UsedCarImageDTO">
    INSERT INTO USED_CAR_IMAGE (IMAGE_ID, VEHICLE_NO, IMAGE_DATA)
    VALUES (
      USED_CAR_IMAGE_SEQ.NEXTVAL,
      #{vehicleNo, jdbcType=VARCHAR},
      #{imageData, jdbcType=BLOB}
    )
</insert>
```

 ### ì°¨ëŸ‰ ê²Œì‹œíŒ í™”ë©´ 
 ![image](https://github.com/user-attachments/assets/42b1f42c-661a-48f4-85d9-d8fb73e5a04c)
- Front<br>
	- [ì°¨ëŸ‰ ê²Œì‹œíŒ í™”ë©´ Front - usedCarBoard.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/usedCarBoard.js)
- Back<br>
	- [ì°¨ëŸ‰ ê²Œì‹œíŒ í™”ë©´ Back  - UsedCarController.java](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/UsedCarController.java)
- SQL
```
SQL ì…ë ¥
```
 ### ì°¨ëŸ‰ ê²Œì‹œíŒì—ì„œ íŠ¹ì •ì°¨ëŸ‰ ê²€ìƒ‰ í•„í„° ê¸°ë³¸ê°’ ì ì€ ì£¼í–‰ê±°ë¦¬ìˆœ !
![image](https://github.com/user-attachments/assets/6c0aaa17-0072-4bdf-af6f-5aa8cc827dff)
- Front<br>
	-[ì°¨ëŸ‰ ê²Œì‹œíŒ í•„í„° ì ìš© Front - AdminUsedCar.js ](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/AdminUsedCar.js)
- Back<br>
	-[ì°¨ëŸ‰ ê²Œì‹œíŒ í•„í„° ì ìš© Back  - UsedCarController.java / @GetMapping("/getFilteredUsedCars")] - (https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/UsedCarController.java)
- SQL 
```
  <select id="getFilteredUsedCars" parameterType="map" resultMap="UsedCarResultMap"> SELECT UC.*,
    UCI.IMAGE_ID, UCI.IMAGE_DATA, UCI.MAIN_IMAGE_STATUS FROM USED_CAR UC LEFT JOIN USED_CAR_IMAGE
    UCI ON UC.VEHICLE_NO = UCI.VEHICLE_NO WHERE UC.STATUS = 0 AND UC.VEHICLE_NO IN ( SELECT
    vehicle_no FROM ( SELECT DISTINCT VEHICLE_NO, ROW_NUMBER() OVER ( ORDER BY CASE WHEN #{sortBy} =
    'car_km' THEN CAR_KM WHEN #{sortBy} = 'price' THEN PRICE WHEN #{sortBy} = 'model_year' THEN
    MODEL_YEAR END <choose>
      <when test="order == 'asc'">ASC</when>
      <otherwise>DESC</otherwise>
    </choose> ) AS rn FROM USED_CAR WHERE STATUS = 0 AND 1 = 1 <if
      test="vehicleName != null and vehicleName != ''"> AND LOWER(VEHICLE_NAME) LIKE
    LOWER(#{vehicleName}) || '%' </if>
                <if test="vehicleType != null and vehicleType != ''"> AND
    VEHICLE_TYPE = #{vehicleType} </if>
                <if test="brand != null and brand != ''"> AND BRAND =
    #{brand} </if>
                <if test="modelYear != null"> AND MODEL_YEAR = #{modelYear} </if>
                <if
      test="minPrice != null"> AND PRICE &gt;= #{minPrice} </if>
                <if test="maxPrice != null"> AND
    PRICE &lt;= #{maxPrice} </if>
                <if test="color != null and color != ''"> AND COLOR = #{color} </if>
                <if
      test="dealerLocation != null and dealerLocation != ''"> AND DEALER_LOCATION =
    #{dealerLocation} </if>
                <if test="fuelType != null and fuelType.trim() != ''"> AND
    LOWER(FUEL_TYPE) = LOWER(#{fuelType}) </if>
                <if
      test="transmission != null and transmission != ''"> AND TRANSMISSION = #{transmission} </if>
                <if
      test="driveType != null and driveType != ''"> AND DRIVE_TYPE = #{driveType} </if>
                <if
      test="minKm != null"> AND CAR_KM &gt;= #{minKm} </if>
                <if test="maxKm != null"> AND CAR_KM
    &lt;= #{maxKm} </if>
                <if test="seatingCapacity != null"> AND SEATING_CAPACITY =
    #{seatingCapacity} </if> ) WHERE rn &gt; #{offset} AND rn &lt;= #{offset} + #{itemsPerPage} )
    ORDER BY CASE WHEN #{sortBy} = 'car_km' THEN UC.CAR_KM WHEN #{sortBy} = 'price' THEN UC.PRICE
    WHEN #{sortBy} = 'model_year' THEN UC.MODEL_YEAR END <choose>
      <when test="order == 'asc'">ASC</when>
      <otherwise>DESC</otherwise>
    </choose>, UCI.IMAGE_ID ASC </select>
```
 ### ì°¨ëŸ‰ ê²Œì‹œíŒì—ì„œ íŠ¹ì • ì°¨ëŸ‰ ê²€ìƒ‰ í•„í„° ë‚®ì€ê°€ê²©ìˆœ , ì¹´í…Œê³ ë¦¬ ë³€ê²½ 
 ![image](https://github.com/user-attachments/assets/900325d3-c610-4e50-abf3-ba37624ae692)
- Front<br>
	-[ì°¨ëŸ‰ ê²Œì‹œíŒ í•„í„° ì ìš© Front - AdminUsedCar.js ](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/AdminUsedCar.js)
- Back<br>
	-[ì°¨ëŸ‰ ê²Œì‹œíŒ í•„í„° ì ìš© Back  - UsedCarController.java / @GetMapping("/getFilteredUsedCars")] - (https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/UsedCarController.java)
- SQL
```
SQLë¬¸ ìœ„ì™€ ê°™ìŒ
```
 ###  ì°¨ëŸ‰ ìƒì„¸í˜ì´ì§€ 
 ![image](https://github.com/user-attachments/assets/37726014-7929-4969-b380-1aa7e6b32c86)
- Front<br>
	- [ì°¨ëŸ‰ ìƒì„¸ í˜ì´ì§€ Front - CarDetail.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/CarDetail.js)
- Back<br>
	- [ì°¨ëŸ‰ ìƒì„¸ í˜ì´ì§€ Back  -  @GetMapping("/detail")](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/UsedCarController.java)
	- SQL
```
  <select id="findByVehicleNo" parameterType="String" resultMap="UsedCarResultMap"> SELECT UC.*,
    UCI.IMAGE_ID, UCI.IMAGE_DATA, UCI.MAIN_IMAGE_STATUS FROM USED_CAR UC LEFT JOIN USED_CAR_IMAGE
    UCI ON UC.VEHICLE_NO = UCI.VEHICLE_NO WHERE UC.VEHICLE_NO = #{vehicleNo} AND UC.STATUS = 0 ORDER
    BY UCI.IMAGE_ID ASC </select>
```
 ###  ì°¨ëŸ‰ ê²°ì œì •ë³´ í˜ì´ì§€ ì´ë™ 
 ![image](https://github.com/user-attachments/assets/3b5943e0-4e05-4f2a-bdd4-e2315efaa32a)
- Front<br>
	- [ì°¨ëŸ‰ ê²°ì œì •ë³´ í˜ì´ì§€ ì´ë™ Front - CarPaymentdetaile.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/CarPaymentdetaile.js)
- Back<br>
	- [ìœ ì € í¬ì¸íŠ¸ , ìœ ì € ì •ë³´ ì¡°íšŒ Back -  @GetMapping("/point"), @GetMapping("/user/info")](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/UsedCarController.java)
- SQL
```
 <!-- ì‚¬ìš©ì ì „ì²´ ì •ë³´ ì¡°íšŒ (í¬ì¸íŠ¸ í¬í•¨) -->
  <select id="findUserById" parameterType="String" resultType="com.rental.dto.UserDTO"> SELECT
    USER_NO, NAME, EMAIL, PHONE, POINT, USER_ID, ADDRESS FROM users WHERE USER_ID = #{userId} </select>
```
 ### ì°¨ëŸ‰ ê²°ì œì •ë³´ ìƒì„¸í˜ì´ì§€ë¡œ ì´ë™
 ![image](https://github.com/user-attachments/assets/91733cae-0b0d-4620-886f-77731c5c597c)
- Front<br>
	- [ì°¨ëŸ‰ ê²°ì œì •ë³´ ìƒì„¸í˜ì´ì§€ Front - CarPayment.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/CarPayment.js)
- Back<br>
	- [ì°¨ëŸ‰ ê²°ì œì •ë³´ ìƒì„¸í˜ì´ì§€ Back  -  @PostMapping("/payment")](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/UsedCarController.java)
- SQL
```
 <!-- ê²°ì œ ìƒì„¸ INSERT -->
  <insert id="insertUsedCarPaymentDetail" parameterType="com.rental.dto.UsedCarpaymentDetailDTO">
    INSERT INTO USED_CAR_PAYMENT_DETAIL (VEHICLE_NO, PAYMENT_NO, PAYMENT_DATE, PAYMENT_AMOUNT,
    user_no) VALUES (#{vehicleNo}, #{paymentNo}, #{paymentDate}, #{paymentAmount}, #{userNo}) </insert>

  <!--  ì‚¬ìš©ì í¬ì¸íŠ¸ ì°¨ê° -->
    <update id="updateUserPoint">
        UPDATE users 
        SET point = #{newPoint} 
        WHERE user_no = #{userNo}
    </update>

  <!-- ì†Œí”„íŠ¸ ë”œë¦¬íŠ¸ (ì°¨ëŸ‰ ìƒíƒœ ë³€ê²½) -->
  <update id="softDeleteUsedCar" parameterType="string"> UPDATE USED_CAR SET STATUS = 1 WHERE
    VEHICLE_NO = #{vehicleNo} </update>

```
 ### ì „êµ­ ì§ì˜ì  ì²« í˜ì´ì§€ 
 ![image](https://github.com/user-attachments/assets/8198935d-f6bd-4de3-b3db-3fb78be2a4ed)
- Front<br>
	- [ì „êµ­ ì§ì˜ì  í˜ì´ì§€ Front - DealerLocationList.js ](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/DealerLocationList.js)
- Back<br>
	- [ì „êµ­ ì§ì˜ì  í˜ì´ì§€ Back  - DealerLocationController.java](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/DealerLocationController.java)
- SQL
```
<!-- ì¤‘ë³µë˜ì§€ ì•ŠëŠ” íŒë§¤ì  ì¡°íšŒ -->
<select id="findDistinctDealerLocations" resultType="com.rental.dto.UsedCarDTO">
    SELECT DISTINCT dealer_location AS dealerLocation
    FROM used_car
</select>
```
 ### ì „êµ­ ì§ì˜ì  ì§€ì—­ì„ íƒ í›„ í™”ë©´
![image](https://github.com/user-attachments/assets/273c20c8-3677-4b43-89c4-59455f09e17c)íŠ¹ì •ì°¨ëŸ‰ í´ë¦­ì‹œ í•´ë‹¹ì°¨ëŸ‰ ìƒì„¸í˜ì´ì§€ë¡œ ë‹¤ì´ë ‰íŠ¸ ì´ë™
- Front<br>
	- [ì „êµ­ ì§ì˜ì  ìƒì„¸í˜ì´ì§€ Front - CarsByLocation.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/page/CarsByLocation.js)
- Back<br>
	- [ì „êµ­ ì§ì˜ì  ìƒì„¸í˜ì´ì§€ Back  -  @GetMapping("/{location}")](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/DealerLocationController.java)
	- SQL
```
<select id="findCarsByLocation"
        parameterType="String"
        resultType="com.rental.dto.UsedCarDTO">
    SELECT ... FROM used_car WHERE dealer_location = #{location}
</select>
```
 ### ì±—ë´‡ 
 ![image](https://github.com/user-attachments/assets/450a3b8c-e71b-40ea-836a-29737e1e3fb1)íŠ¹ì •ì§€ì—­ ì°¨ëŸ‰ëª©ë¡ ì¶œë ¥
- Front<br>
	- [ì±—ë´‡ íŠ¹ì •ì§€ì—­ ì°¨ëŸ‰ëª©ë¡ ì¶œë ¥ Front - Chatbot.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/components/Chatbot.js)
- Back<br>
	- [ì±—ë´‡ íŠ¹ì •ì§€ì—­ ì°¨ëŸ‰ëª©ë¡ ì¶œë ¥ Back  - ChatBotController.java /  @PostMapping("/webhook")](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/ChatBotController.java)
- SQL
```
    <!--  ì§€ì—­ë³„ ì°¨ëŸ‰ ëª©ë¡ ì¡°íšŒ -->
    <select id="findByDealerLocation" parameterType="string" resultType="com.rental.dto.UsedCarDTO">
        SELECT 
            vehicle_no AS vehicleNo,
            vehicle_name AS vehicleName,
            dealer_no AS dealerNo,
            vehicle_type AS vehicleType,
            brand,
            model_year AS modelYear,
            price,
            color,
            dealer_location AS dealerLocation,
            fuel_type AS fuelType,
            transmission,
            drive_type AS driveType,
            main_image AS mainImage,
            vehicle_plate AS vehiclePlate,
            car_km AS carKm,
            seating_capacity AS seatingCapacity,
            description,
            status
        FROM used_car
        WHERE dealer_location = #{dealerLocation}
    </select>
```
 ### ì±—ë´‡ 
 ![image](https://github.com/user-attachments/assets/cfee6c49-e196-4df4-8d09-4da3084f3257)íŠ¹ì • ì°¨ëŸ‰ë²ˆí˜¸ ì •ë³´ ì¶œë ¥
- Front<br>
	- [ì±—ë´‡ íŠ¹ì • ì°¨ëŸ‰ë²ˆí˜¸ ì •ë³´ ì¶œë ¥ Front - Chatbot.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/components/Chatbot.js)
- Back<br>
	- [ì±—ë´‡ íŠ¹ì • ì°¨ëŸ‰ë²ˆí˜¸ ì •ë³´ ì¶œë ¥ Back  - Back  - ChatBotController.java /  @PostMapping("/webhook")](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/ChatBotController.java)
	- SQL
```
<!-- ì°¨ëŸ‰ë²ˆí˜¸(vehicleNo)ë¡œ ìƒì„¸ ì¡°íšŒ -->
<select id="findByVehiclePlate" parameterType="java.lang.String" resultType="com.rental.dto.UsedCarDTO">
    SELECT 
        vehicle_no AS vehicleNo,
        vehicle_name AS vehicleName,
        dealer_no AS dealerNo,
        vehicle_type AS vehicleType,
        brand,
        model_year AS modelYear,
        price,
        color,
        dealer_location AS dealerLocation,
        fuel_type AS fuelType,
        transmission,
        drive_type AS driveType,
        main_image AS mainImage,
        vehicle_plate AS vehiclePlate,
        car_km AS carKm,
        seating_capacity AS seatingCapacity,
        description,
        status
    FROM used_car
    WHERE vehicle_plate = #{vehiclePlate}
</select>
```
### ì±—ë´‡ ì±„íŒ… 
![image](https://github.com/user-attachments/assets/4640d234-0ed4-4483-bf4d-26ec1766fbea)( ì‚¬ìš©ì ì‹œì  ) 
![image](https://github.com/user-attachments/assets/88d3d371-3eca-41f4-b163-8c2990a5bca3)( ìƒë‹´ì‚¬ ì‹œì  )

- Front<br>
	- [ì±—ë´‡ ì±„íŒ… Front - Chatbot.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/components/Chatbot.js)
- Back<br>
	- [ì±—ë´‡ ì±„íŒ… Back  - ChatController.java /  @MessageMapping("/chat.sendMessage")](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/ChatController.java)
- WebSocket<br>
	- [ WebSocket - WebSocketConfig.java](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/config/WebSocketConfig.java)
  	- SQL
```
  <!-- ì±„íŒ…ë°© ìƒì„±: ìƒˆë¡œìš´ ì±„íŒ…ë°© ì •ë³´ë¥¼ DBì— ì‚½ì… -->
  <insert id="insertChatRoom" parameterType="com.rental.dto.ChatRoomDTO">
   INSERT INTO chat_room (room_id, user_no, admin_no, status, created_at)
   VALUES (#{roomId}, #{userNo}, #{adminNo, jdbcType=INTEGER}, #{status}, #{createdAt})
  </insert>


 <!-- ì±„íŒ… ë©”ì‹œì§€ ì €ì¥: ì „ë‹¬ë°›ì€ ë©”ì‹œì§€ë¥¼ CHAT_MESSAGE í…Œì´ë¸”ì— ì‚½ì… -->
 <insert id="insertChatMessage" parameterType="com.rental.dto.ChatMessageDTO">
  INSERT INTO CHAT_MESSAGE (message_id, room_id, sender_id, message, sent_at)
  VALUES (CHAT_MESSAGE_SEQ.NEXTVAL, #{roomId}, #{senderId}, #{message}, #{sentAt})
</insert>

  <!-- ì±„íŒ…ë°© ì¢…ë£Œ: ì±„íŒ…ë°© ìƒíƒœë¥¼ 'closed'ë¡œ ë³€ê²½í•˜ê³  ì¢…ë£Œ ì‹œê°„ì„ ê¸°ë¡ -->
  <update id="updateRoomStatusToClosed">
    UPDATE chat_room
    SET status = 'closed',
        closed_at = #{closedAt}
    WHERE room_id = #{roomId}
  </update>

```
### ìƒë‹´ì› ì „ìš© ì±„íŒ… í˜ì´ì§€ 
![image](https://github.com/user-attachments/assets/c2f496c6-e182-40d3-a110-8d10b1c69c00)ìƒë‹´ì› ì „ìš© ì±„íŒ…ëª©ë¡ í˜ì´ì§€ (ìˆ˜ë½,ê±°ì ˆ,ëŒ€ê¸°ì¤‘) 
- Front<br>
	- [ìƒë‹´ì› ì „ìš© í˜ì´ì§€ Front - AgentChatList.js](https://github.com/Hongpiljin/Project/blob/KH_final_project/Front/src/components/AgentChatList.js)
- Back<br>
	- [ìƒë‹´ì› ì „ìš© í˜ì´ì§€ Back  - ChatController.java / chat/accept , chat/reject , chat/close , chat/select api ì‚¬ìš©](https://github.com/Hongpiljin/Project/blob/KH_final_project/Back/src/main/java/com/rental/controller/ChatController.java)
  	- SQL
```
  <!-- ì±„íŒ…ë°© ìˆ˜ë½: ìƒë‹´ì›ì´ ë°°ì •ë˜ë©´ì„œ ì±„íŒ…ë°© ìƒíƒœë¥¼ 'active'ë¡œ ë³€ê²½ -->
<update id="updateRoomStatusToActive" parameterType="map">
    UPDATE CHAT_ROOM
    SET 
        admin_no = #{consultantId},
        admin_name = #{adminName},
        status = 'active',
        accepted_at = #{acceptedAt}
    WHERE room_id = #{roomId}
</update>

  <!-- ì±„íŒ…ë°© ê±°ì ˆ: ì±„íŒ…ë°© ìƒíƒœë¥¼ 'rejected'ë¡œ ë³€ê²½í•˜ë©° ì¢…ë£Œ ì‹œê°„ì„ ê¸°ë¡ -->
  <update id="updateRoomStatusToRejected">
    UPDATE chat_room
    SET status = 'rejected',
        closed_at = #{rejectedAt}
    WHERE room_id = #{roomId}
  </update>

<!--  ìƒë‹´ì› ë¦¬ìŠ¤íŠ¸ : adminName , status í•„í„°ë§ -->
<select id="selectChatRooms" resultType="com.rental.dto.ChatRoomDTO">
  SELECT room_id, user_no, admin_no, status, created_at, closed_at, admin_name
  FROM chat_room
  <where>
    <if test="adminName != null and adminName != ''">
      admin_name LIKE '%' || #{adminName} || '%'
    </if>
    <if test="status != null and status != ''">
      <if test="adminName != null and adminName != ''">AND</if>
      status = #{status}
    </if>
  </where>
  ORDER BY created_at DESC
</select>
```
>## 5. í”„ë¡œì íŠ¸ ì†Œê° ë° í–¥í›„ ê³„íš
íŒŒì´ë„ í”„ë¡œì íŠ¸ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©°, íŒ€ì›ë“¤ê³¼ í•¨ê»˜ í•˜ë‚˜ì˜ ì™„ì„±ëœ ì›¹ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í–ˆë‹¤ëŠ” ì ì—ì„œ í° ì„±ì·¨ê°ì„ ëŠê¼ˆìŠµë‹ˆë‹¤. ì²˜ìŒì—ëŠ” ì£¼ì œ ì„ ì •ê³¼ ê¸°ëŠ¥ êµ¬ì„±ë¶€í„° ë§ì€ ê³ ë¯¼ì´ ìˆì—ˆì§€ë§Œ, ì´ì „ í”„ë¡œì íŠ¸ì—ì„œ ê²½í—˜í•œ í•„í„°ë§, í˜ì´ì§•, ê²€ìƒ‰ ê¸°ëŠ¥ ë“±ì„ í† ëŒ€ë¡œ ë³´ë‹¤ ìˆ˜ì›”í•˜ê²Œ ì§„í–‰í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¨ìˆœíˆ ê¸°ëŠ¥ êµ¬í˜„ì— ê·¸ì¹˜ì§€ ì•Šê³ , ì‹¤ì œ ì‚¬ìš©ì ê²½í—˜ê³¼ ê°œë°œì ì…ì¥ì—ì„œì˜ ê³ ë¯¼ì„ ë™ì‹œì— ê³ ë ¤í•˜ì—¬ ê°œë°œí•˜ë ¤ê³  ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¤‘ê³ ì°¨ ì´ë¯¸ì§€ ì €ì¥ ë°©ì‹ì— ëŒ€í•´ ì²˜ìŒì—ëŠ” AWS ì„œë²„ë¥¼ ì´ìš©í•œ ì™¸ë¶€ ì €ì¥ì„ ê²€í† í–ˆì§€ë§Œ, ë¹„ìš© ë¬¸ì œì™€ ê´€ë¦¬ ì´ìŠˆë¥¼ ê³ ë ¤í•´ Base64 ë°©ì‹ìœ¼ë¡œ DBì— BLOB í˜•íƒœë¡œ ì €ì¥í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì„ í†µí•´ ê¸°ìˆ  ì„ íƒì— ìˆì–´ ì‹¤ìš©ì„±ê³¼ ë¹„ìš© íš¨ìœ¨ì„±ê¹Œì§€ í•¨ê»˜ ê³ ë ¤í•˜ëŠ” ì¤‘ìš”í•œ ê²½í—˜ì„ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
ë˜í•œ, WebSocketì„ í™œìš©í•œ ì‹¤ì‹œê°„ 1:1 ìƒë‹´ ì±„íŒ… ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬í˜„í•˜ë©° ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ ì‹¤ì‹œê°„ í†µì‹  êµ¬ì¡°ì— ëŒ€í•œ ì´í•´ë¥¼ ë†’ì¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì„¤ì •ê³¼ í…ŒìŠ¤íŠ¸ ê³¼ì •ì—ì„œ ë§ì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ê²ªì—ˆì§€ë§Œ, ê·¸ë§Œí¼ í° ì„±ì¥ì„ ì´ë¤˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.
ì´ëŸ¬í•œ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ, ì´ì œëŠ” ë‹¨ìˆœíˆ â€˜ì‘ë™í•˜ëŠ” í”„ë¡œê·¸ë¨â€™ì„ ë„˜ì–´ì„œ â€˜ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ì„œë¹„ìŠ¤â€™ë¥¼ ì„¤ê³„í•˜ê³ , ë‹¤ì–‘í•œ ê¸°ìˆ  ìŠ¤íƒì„ ì ì¬ì ì†Œì— ì ìš©í•˜ëŠ” ê°œë°œìê°€ ë˜ê³ ì í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œë„ ê¾¸ì¤€íˆ ì—­ëŸ‰ì„ í‚¤ìš°ë©°, ì‹¤ë¬´ì—ì„œë„ ì ê·¹ì ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ê°œì„ ì ì„ ì°¾ì•„ë‚´ëŠ” ê°œë°œìê°€ ë˜ê² ìŠµë‹ˆë‹¤.
